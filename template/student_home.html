<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .card-hover:hover {
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.15);
      transform: scale(1.01);
      transition: 0.2s;
    }
  </style>
</head>
<body class="bg-light">

<div class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-primary">ğŸ“ Student Dashboard â€“ {{ student.user.username }}</h2>
    <a href="{% url 'logout_page' %}" class="btn btn-danger">ğŸšª Logout</a>
  </div>

  <div class="d-flex justify-content-between align-items-center mb-3">
  <h4 class="text-secondary">ğŸ” Search Events</h4>
  <form method="get" action="{% url 'search_event' %}" class="d-flex" role="search">
    <input class="form-control me-2" type="search" name="q" placeholder="Search by name/category..." aria-label="Search" required>
    <button class="btn btn-outline-primary" type="submit">Search</button>
  </form>
</div>

  <div class="card mb-4 shadow-sm">
  <div class="card-header bg-warning text-dark">
    <h5>ğŸ“¢ Notifications</h5>
  </div>
  <ul class="list-group list-group-flush">
    {% for note in notifications %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ note.message }}
        <small class="text-muted">{{ note.created_at|date:"M d, Y H:i" }}</small>
      </li>
    {% empty %}
      <li class="list-group-item text-muted text-center">No notifications yet.</li>
    {% endfor %}
  </ul>
</div>

  <!-- Navigation Cards -->
  <div class="row mb-5">
    <div class="col-md-3">
      <a href="{% url 'student_events' %}" class="text-decoration-none">
        <div class="card card-hover text-center">
          <div class="card-body">
            <h6>ğŸ“… Events</h6>
          </div>
        </div>
      </a>
    </div>
    <div class="col-md-3">
      <a href="{% url 'view_attendance' %}" class="text-decoration-none">
        <div class="card card-hover text-center">
          <div class="card-body">
            <h6>âœ… Attendance</h6>
          </div>
        </div>
      </a>
    </div>
    <div class="col-md-3">
      <a href="{% url 'view_certificates' %}" class="text-decoration-none">
        <div class="card card-hover text-center">
          <div class="card-body">
            <h6>ğŸ“œ Certificates</h6>
          </div>
        </div>
      </a>
    </div>
  </div>

  <!-- Registered Events -->
  <div class="card mb-5 shadow">
    <div class="card-header bg-primary text-white">
      <h5>ğŸ“ Registered Events</h5>
    </div>
    <ul class="list-group list-group-flush">
      {% for reg in register_events %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ reg.event.name }}</strong> â€“ 
            <span class="text-muted">{{ reg.status }}</span>
          </div>
          <span class="badge bg-info text-white">{{ reg.registered_at }}</span>
        </li>
      {% empty %}
        <li class="list-group-item text-center text-muted">No registrations yet.</li>
      {% endfor %}
    </ul>
  </div>

  <!-- Certificates -->
  <div class="card shadow">
    <div class="card-header bg-success text-white">
      <h5>ğŸ“œ Downloadable Certificates</h5>
    </div>
    <ul class="list-group list-group-flush">
      {% for cert in certificates %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ cert.registration.event.name }}
          {% if cert.file %}
              <a href="{{ cert.file.url }}" class="btn btn-sm btn-success" download>Download</a>
          {% else %}
              <span class="text-muted">ğŸ“„ Not uploaded yet</span>
          {% endif %}
      {% endfor %}
    </ul>
  </div>

</div>
</body>
</html>
